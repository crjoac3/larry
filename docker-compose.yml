version: '3.8'

services:
  larry-app:
    build: .
    container_name: larry_web
    restart: always
    ports:
      - "8501:8501"
    volumes:
      # Local Dev Binding - Mount root to /app to hot-reload code
      - ./:/app
      # Local Dev Binding - Mount root to /data to sync local CSVs directly
      - ./:/data
    environment:
      - DATA_VOLUME=/data
      - USER_DB_FILE=/data/users.csv
      - COMPANIES_FILE=/data/companies.csv
      - MASTER_INVENTORY_FILE=/data/master_inventory.csv
      - RECALL_LOG_FILE=/data/recall_requests_log.csv
      - AUDIT_LOG_FILE=/data/audit_requests_log.csv
      - SETTINGS_FILE=/data/settings.json
      - LOGO_FILE=/data/logo.jpg
      # SendGrid keys
      - SENDGRID_API_KEY=${SENDGRID_API_KEY}
      - SENDGRID_FROM_EMAIL=${SENDGRID_FROM_EMAIL}
      # Git Auto-Update (Set to 'true' for production, 'false' for local dev)
      - GIT_UPDATE=false
